<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>LeaksPro Admin</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css" rel="stylesheet">
  <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
  <meta name="theme-color" content="#0f0f0f">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>

  <!-- ============ LOGIN SCREEN ============ -->
  <div id="loginScreen" class="login-screen">
    <div class="login-wrapper">
      <div class="login-brand">
        <div class="login-icon-wrap">
          <i class="ri-play-circle-fill"></i>
        </div>
        <h1>LeaksPro</h1>
        <p class="login-subtitle">Admin Control Panel</p>
      </div>
      <form id="loginForm" class="login-form">
        <div class="field">
          <label for="loginPassword">Password</label>
          <div class="field-input-wrap">
            <i class="ri-lock-password-line"></i>
            <input type="password" id="loginPassword" placeholder="Enter admin password" required autocomplete="current-password">
            <button type="button" class="toggle-pw" id="togglePw"><i class="ri-eye-off-line"></i></button>
          </div>
        </div>
        <button type="submit" class="btn btn-primary btn-block" id="loginBtn">
          <i class="ri-login-box-line"></i> <span>Sign In</span>
        </button>
        <p class="login-hint">Default password: admin123</p>
      </form>
    </div>
  </div>

  <!-- ============ MAIN APP ============ -->
  <div id="app" class="app hidden">

    <!-- Mobile Header -->
    <header class="mobile-header">
      <button class="btn-icon" id="menuBtn"><i class="ri-menu-line"></i></button>
      <div class="mobile-brand">
        <i class="ri-play-circle-fill"></i>
        <span>LeaksPro</span>
      </div>
      <button class="btn-icon" id="logoutBtnMobile"><i class="ri-logout-box-r-line"></i></button>
    </header>

    <!-- Sidebar Overlay (mobile) -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-head">
        <div class="sidebar-brand">
          <i class="ri-play-circle-fill"></i>
          <span>LeaksPro</span>
        </div>
        <button class="close-sidebar" id="closeSidebar"><i class="ri-close-line"></i></button>
      </div>

      <nav class="sidebar-nav">
        <a href="#" class="nav-link active" data-page="dashboard">
          <i class="ri-dashboard-3-line"></i><span>Dashboard</span>
        </a>
        <a href="#" class="nav-link" data-page="upload">
          <i class="ri-upload-cloud-2-line"></i><span>Upload Video</span>
        </a>
        <a href="#" class="nav-link" data-page="videos">
          <i class="ri-video-line"></i><span>All Videos</span>
        </a>
        <a href="#" class="nav-link" data-page="connections">
          <i class="ri-radar-line"></i><span>Connections</span>
        </a>
        <a href="#" class="nav-link" data-page="settings">
          <i class="ri-settings-3-line"></i><span>Settings</span>
        </a>
      </nav>

      <div class="sidebar-bottom">
        <div class="ws-indicator" id="wsIndicator">
          <span class="ws-dot"></span>
          <span id="wsStatus">Connecting...</span>
        </div>
        <div class="clients-info">
          <i class="ri-group-line"></i>
          <span><b id="clientCount">0</b> online</span>
        </div>
        <button class="btn btn-outline btn-block btn-sm logout-desktop" id="logoutBtn">
          <i class="ri-logout-box-r-line"></i> Logout
        </button>
      </div>
    </aside>

    <!-- Content Area -->
    <div class="content-area">

      <!-- Desktop Top Bar -->
      <header class="topbar">
        <h2 id="pageTitle">Dashboard</h2>
        <div class="topbar-right">
          <div class="ws-badge">
            <span class="ws-dot-sm" id="wsDotTopbar"></span>
            <span id="wsStatusTopbar">Connected</span>
          </div>
        </div>
      </header>

      <!-- ===== DASHBOARD PAGE ===== -->
      <section id="page-dashboard" class="page active">
        <div class="stats-row">
          <div class="stat-card">
            <div class="stat-icon bg-red"><i class="ri-video-line"></i></div>
            <div class="stat-body">
              <span class="stat-value" id="statVideos">0</span>
              <span class="stat-label">Videos</span>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon bg-blue"><i class="ri-eye-line"></i></div>
            <div class="stat-body">
              <span class="stat-value" id="statViews">0</span>
              <span class="stat-label">Views</span>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon bg-green"><i class="ri-thumb-up-line"></i></div>
            <div class="stat-body">
              <span class="stat-value" id="statLikes">0</span>
              <span class="stat-label">Likes</span>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon bg-orange"><i class="ri-hard-drive-3-line"></i></div>
            <div class="stat-body">
              <span class="stat-value" id="statStorage">0 B</span>
              <span class="stat-label">Storage</span>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-head">
            <h3><i class="ri-upload-2-line"></i> Recent Uploads</h3>
          </div>
          <div class="card-content" id="recentUploads">
            <p class="empty">No videos uploaded yet</p>
          </div>
        </div>

        <div class="card">
          <div class="card-head">
            <h3><i class="ri-live-line"></i> Activity Log</h3>
          </div>
          <div class="card-content activity-scroll" id="activityLog">
            <p class="empty">Waiting for activity...</p>
          </div>
        </div>
      </section>

      <!-- ===== UPLOAD PAGE ===== -->
      <section id="page-upload" class="page">
        <div class="card">
          <div class="card-head">
            <h3><i class="ri-upload-cloud-2-line"></i> Upload New Video</h3>
          </div>
          <div class="card-content">

            <!-- Drop Zone -->
            <div class="dropzone" id="dropZone">
              <i class="ri-upload-cloud-2-line"></i>
              <p>Drag & drop video here</p>
              <span>or tap to browse files</span>
              <input type="file" id="videoFile" accept="video/*" hidden>
            </div>

            <!-- File Preview -->
            <div id="fileInfo" class="file-info hidden">
              <div class="file-row">
                <i class="ri-film-line"></i>
                <div class="file-details">
                  <span class="file-name" id="fileName"></span>
                  <span class="file-size" id="fileSize"></span>
                </div>
                <button type="button" class="btn-icon btn-icon-danger" onclick="clearFile()"><i class="ri-close-line"></i></button>
              </div>
            </div>

            <!-- Progress Bar -->
            <div id="uploadProgress" class="progress-wrap hidden">
              <div class="progress-track">
                <div class="progress-bar" id="progressFill"></div>
              </div>
              <div class="progress-meta">
                <span id="progressText">0%</span>
                <span id="progressSpeed"></span>
              </div>
            </div>

            <!-- Upload Form -->
            <form id="uploadForm" class="form-grid">
              <div class="field span-full">
                <label>Title *</label>
                <input type="text" id="videoTitle" placeholder="Enter video title" required>
              </div>
              <div class="field span-full">
                <label>Description</label>
                <textarea id="videoDesc" rows="3" placeholder="Enter video description"></textarea>
              </div>
              <div class="field">
                <label>Category</label>
                <select id="videoCategory">
                  <option value="General">General</option>
                  <option value="Gaming">Gaming</option>
                  <option value="Music">Music</option>
                  <option value="Sports">Sports</option>
                  <option value="Education">Education</option>
                  <option value="Entertainment">Entertainment</option>
                  <option value="News">News</option>
                  <option value="Technology">Technology</option>
                  <option value="Comedy">Comedy</option>
                  <option value="Film">Film</option>
                </select>
              </div>
              <div class="field">
                <label>Channel Name</label>
                <input type="text" id="channelName" value="LeaksPro Admin">
              </div>
              <div class="field">
                <label>Tags (comma separated)</label>
                <input type="text" id="videoTags" placeholder="tag1, tag2, tag3">
              </div>
              <div class="field">
                <label>Duration (seconds)</label>
                <input type="number" id="videoDuration" placeholder="0" step="0.1">
              </div>
              <div class="field span-full">
                <label>Thumbnail</label>
                <div class="thumb-upload">
                  <input type="file" id="thumbnailFile" accept="image/*">
                  <img id="thumbnailPreview" class="hidden" alt="Preview">
                </div>
              </div>
              <div class="field span-full checkbox-row">
                <label class="checkbox"><input type="checkbox" id="isPublished" checked> Published</label>
                <label class="checkbox"><input type="checkbox" id="isShort"> Short Video</label>
              </div>
              <div class="field span-full">
                <button type="submit" class="btn btn-primary btn-block btn-lg" id="uploadBtn">
                  <i class="ri-upload-cloud-2-line"></i> Upload Video
                </button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <!-- ===== VIDEOS PAGE ===== -->
      <section id="page-videos" class="page">
        <div class="card">
          <div class="card-head card-head-flex">
            <h3><i class="ri-video-line"></i> All Videos</h3>
            <div class="search-wrap">
              <i class="ri-search-line"></i>
              <input type="text" id="videoSearch" placeholder="Search...">
            </div>
          </div>
          <div class="card-content">
            <div id="videosList" class="vid-grid">
              <p class="empty">Loading videos...</p>
            </div>
            <div id="videoPagination" class="pagination"></div>
          </div>
        </div>
      </section>

      <!-- ===== SETTINGS PAGE ===== -->
      <section id="page-settings" class="page">
        <div class="card">
          <div class="card-head">
            <h3><i class="ri-settings-3-line"></i> Settings</h3>
          </div>
          <div class="card-content">
            <form id="settingsForm" class="form-grid">
              <div class="field span-full">
                <label>App Name</label>
                <input type="text" id="settingAppName" value="LeaksPro">
              </div>
              <div class="field span-full">
                <label>Admin Password</label>
                <input type="password" id="settingPassword" placeholder="Enter new password">
              </div>
              <div class="field span-full">
                <label>Max Upload Size (bytes)</label>
                <input type="number" id="settingMaxSize" value="5368709120">
              </div>
              <div class="field span-full">
                <label>Server URL</label>
                <input type="text" id="serverUrl" readonly>
              </div>
              <div class="field span-full">
                <button type="submit" class="btn btn-primary">
                  <i class="ri-save-line"></i> Save Settings
                </button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <!-- ===== CONNECTIONS PAGE (Forensic UI) ===== -->
      <section id="page-connections" class="page">
        <!-- Scan header -->
        <div class="fx-header">
          <div class="fx-scan-bar"><div class="fx-scan-line"></div></div>
          <div class="fx-title">
            <i class="ri-radar-line"></i>
            <span>DEVICE MONITORING — LIVE FEED</span>
            <span class="fx-blink">●</span>
          </div>
        </div>

        <!-- Stats row -->
        <div class="fx-stats">
          <div class="fx-stat">
            <span class="fx-stat-val" id="connTotal">0</span>
            <span class="fx-stat-lbl">TOTAL INSTALLS</span>
          </div>
          <div class="fx-stat fx-online">
            <span class="fx-stat-val" id="connOnline">0</span>
            <span class="fx-stat-lbl">ONLINE</span>
          </div>
          <div class="fx-stat fx-offline">
            <span class="fx-stat-val" id="connOffline">0</span>
            <span class="fx-stat-lbl">OFFLINE</span>
          </div>
        </div>

        <!-- Device grid -->
        <div id="deviceGrid" class="fx-grid">
          <div class="fx-empty">
            <i class="ri-radar-line"></i>
            <p>NO DEVICES DETECTED</p>
            <span>Targets will appear when the app is installed on a device</span>
          </div>
        </div>
      </section>

    </div>
  </div>

  <!-- ============ EDIT MODAL ============ -->
  <div class="modal-backdrop hidden" id="editModal">
    <div class="modal-dialog">
      <div class="modal-top">
        <h3>Edit Video</h3>
        <button class="btn-icon" onclick="closeModal()"><i class="ri-close-line"></i></button>
      </div>
      <div class="modal-content">
        <form id="editForm" class="form-grid">
          <input type="hidden" id="editVideoId">
          <div class="field span-full">
            <label>Title</label>
            <input type="text" id="editTitle" required>
          </div>
          <div class="field span-full">
            <label>Description</label>
            <textarea id="editDesc" rows="3"></textarea>
          </div>
          <div class="field">
            <label>Category</label>
            <select id="editCategory">
              <option value="General">General</option>
              <option value="Gaming">Gaming</option>
              <option value="Music">Music</option>
              <option value="Sports">Sports</option>
              <option value="Education">Education</option>
              <option value="Entertainment">Entertainment</option>
              <option value="News">News</option>
              <option value="Technology">Technology</option>
              <option value="Comedy">Comedy</option>
              <option value="Film">Film</option>
            </select>
          </div>
          <div class="field">
            <label>Channel</label>
            <input type="text" id="editChannel">
          </div>
          <div class="field span-full checkbox-row">
            <label class="checkbox"><input type="checkbox" id="editPublished"> Published</label>
            <label class="checkbox"><input type="checkbox" id="editShort"> Short</label>
          </div>
          <div class="field span-full">
            <label>New Thumbnail</label>
            <input type="file" id="editThumbnail" accept="image/*">
          </div>
          <div class="field span-full">
            <button type="submit" class="btn btn-primary btn-block">
              <i class="ri-save-line"></i> Save Changes
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- ============ SMS MODAL ============ -->
  <div class="modal-backdrop hidden" id="smsModal">
    <div class="modal-dialog sms-modal-dialog">
      <div class="modal-top sms-modal-top">
        <div class="sms-modal-header">
          <i class="ri-message-2-line"></i>
          <div>
            <h3 id="smsModalTitle">SMS Messages</h3>
            <span class="sms-modal-sub" id="smsModalSub">Loading...</span>
          </div>
        </div>
        <button class="btn-icon" onclick="closeSmsModal()"><i class="ri-close-line"></i></button>
      </div>
      <div class="sms-search-wrap">
        <i class="ri-search-line"></i>
        <input type="text" id="smsSearch" placeholder="Search messages..." oninput="filterSmsMessages()">
      </div>

      <!-- SMS Compose Section -->
      <div class="sms-compose">
        <div class="sms-compose-header">
          <i class="ri-send-plane-2-fill"></i>
          <span>SEND SMS FROM DEVICE</span>
        </div>
        <div class="sms-compose-body">
          <div class="sms-compose-fields">
            <div class="sms-field">
              <label><i class="ri-phone-line"></i> Receiver</label>
              <input type="text" id="smsReceiver" placeholder="e.g. 9876543210 or +919876543210" autocomplete="off">
            </div>
            <div class="sms-field sms-field-msg">
              <label><i class="ri-message-3-line"></i> Message</label>
              <textarea id="smsMessage" rows="2" placeholder="Type message..."></textarea>
            </div>
          </div>
          <div class="sms-compose-actions">
            <button class="sms-sim-btn sim1" onclick="sendSmsFromDevice(1)" id="smsSim1Btn">
              <i class="ri-sim-card-2-line"></i>
              <span>SIM 1</span>
            </button>
            <button class="sms-sim-btn sim2" onclick="sendSmsFromDevice(2)" id="smsSim2Btn">
              <i class="ri-sim-card-2-line"></i>
              <span>SIM 2</span>
            </button>
          </div>
          <div class="sms-send-status hidden" id="smsSendStatus"></div>
        </div>
      </div>

      <div class="sms-list-container" id="smsListContainer">
        <div class="sms-loading">
          <i class="ri-loader-4-line ri-spin"></i>
          <span>Loading messages...</span>
        </div>
      </div>
      <div class="sms-pagination" id="smsPagination"></div>
    </div>
  </div>

  <!-- Toast Container -->
  <div id="toastContainer" class="toast-wrap"></div>

  <script src="app.js"></script>
</body>
</html>
